//>>built
require({cache:{"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(k,m,d,l,q,s,u,g,p){function c(e,a){for(var b=e.unselectable=a?"on":"",h=e.getElementsByTagName("*"),v=h.length;--v;)"INPUT"===h[v].tagName||"TEXTAREA"===h[v].tagName||(h[v].unselectable=b)}function t(e,b){var f=e.bodyNode,h=b?"text":21>q("ff")?"-moz-none":"none";
a?f.style[a]=h:q("dom-selectstart")?!b&&!e._selectstartHandle?e._selectstartHandle=l(f,"selectstart",function(h){var e=h.target&&h.target.tagName;"INPUT"!==e&&"TEXTAREA"!==e&&h.preventDefault()}):b&&e._selectstartHandle&&(e._selectstartHandle.remove(),delete e._selectstartHandle):(c(f,!b),!b&&!e._unselectableHandle?e._unselectableHandle=s.after(e,"renderRow",function(h){c(h,!0);return h}):b&&e._unselectableHandle&&(e._unselectableHandle.remove(),delete e._unselectableHandle))}q.add("mspointer",function(e,
a,b){return"onmspointerdown"in b});q.add("css-user-select",function(e,a,b){e=b.style;a=["Khtml","O","ms","Moz","Webkit"];b=a.length;var h="userSelect";do if("undefined"!==typeof e[h])return h;while(b--&&(h=a[b]+"UserSelect"));return!1});q.add("dom-selectstart","undefined"!==typeof document.onselectstart);var b=q("mac")?"metaKey":"ctrlKey",a=q("css-user-select"),f=q("mspointer")?"MSPointerDown":"mousedown",y=q("mspointer")?"MSPointerUp":"mouseup";return m(null,{selectionDelegate:".dgrid-row",selectionEvents:f+
","+y+",dgrid-cellfocusin",deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var e=this.selectionMode;this.selectionMode="";this._setSelectionMode(e);this._initSelectionEvents()},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();
this._deselectionHandle&&this._deselectionHandle.remove()},_setSelectionMode:function(e){e!=this.selectionMode&&(this.clearSelection(),this.selectionMode=e,this._selectionHandlerName="_"+e+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(e){k.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",e)},_setAllowTextSelection:function(e){"undefined"!==typeof e?t(this,e):t(this,"none"===this.selectionMode);
this.allowTextSelection=e},_handleSelect:function(e,a){if(this[this._selectionHandlerName]&&!("dgrid-cellfocusin"===e.type&&"mousedown"===e.parentType||e.type===y&&a!=this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=e;if(!e.keyCode||!e.ctrlKey||32==e.keyCode)if(!e.shiftKey&&e.type===f&&this.isSelected(a))this._waitForMouseUp=a;else this[this._selectionHandlerName](e,a);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(e,a){var c=e.keyCode?e.ctrlKey:e[b];
this._lastSelected===a?this.select(a,null,!c||!this.isSelected(a)):(this.clearSelection(),this.select(a),this._lastSelected=a)},_multipleSelectionHandler:function(e,a){var c=this._lastSelected,h=e.keyCode?e.ctrlKey:e[b],v;e.shiftKey||(v=h?null:!0,c=null);this.select(a,c,v);c||(this._lastSelected=a)},_extendedSelectionHandler:function(e,a){(2===e.button?!this.isSelected(a):!(e.keyCode?e.ctrlKey:e[b]))&&this.clearSelection(null,!0);this._multipleSelectionHandler(e,a)},_toggleSelectionHandler:function(a,
b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,c=this.selectionDelegate;q("touch")?l(this.contentNode,g.selector(c,g.tap),function(b){a._handleSelect(b,this)}):l(this.contentNode,l.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(c){c[b]&&65==c.keyCode&&(c.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});
this._setStore&&s.after(this,"_setStore",function(){a._updateDeselectionAspect()});this._updateDeselectionAspect()},_updateDeselectionAspect:function(){var a=this,b=this.store;this._deselectionSignal&&this._deselectionSignal.remove();this._deselectionSignal=b&&b.notify?s.after(b,"notify",function(b,h){var v=h||b&&b[this.idProperty||"id"];if(v){var c=(v=a.row(v))&&a.selection[v.id];if(c)a[(b?"":"de")+"select"](v,null,c)}},!0):s.before(this,"removeRow",function(a,h){var b;h||(b=this.row(a))&&b.id in
this.selection&&this.deselect(b)})},allowSelect:function(a){return!0},_selectionEventQueue:function(a,b){var c=this,h="dgrid-"+(a?"select":"deselect"),v=this[h],f=this._selectionTriggerEvent;f&&(f=f.type);if(v)return v;setTimeout(this._fireSelectionEvent=function(){if(v){var a={bubbles:!0,grid:c};f&&(a.parentType=f);a[b]=v;l.emit(c.contentNode,h,a);v=null;delete c[h]}},0);return v=this[h]=[]},select:function(a,b,c){void 0===c&&(c=!0);a.element||(a=this.row(a));if(!1===c||this.allowSelect(a)){var h=
this.selection,v=h[a.id];null===c&&(c=!v);var f=a.element;!c&&!this.allSelected?delete this.selection[a.id]:h[a.id]=c;f&&(c?p(f,".dgrid-selected.ui-state-active"):p(f,"!dgrid-selected!ui-state-active"));c!=v&&f&&this._selectionEventQueue(c,"rows").push(a);if(b){b.element||(b=this.row(b));b=b.element;h=a.element;for(h=b&&(b.compareDocumentPosition?2==b.compareDocumentPosition(h):b.sourceIndex>h.sourceIndex)?"down":"up";a.element!=b&&(a=this[h](a));)this.select(a,null,c)}}},deselect:function(a,b){this.select(a,
b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this.deselect(c);b||(this._lastSelected=null)},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this.select(b.id)}},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&
(this.clearSelection(),this._fireSelectionEvent&&this._fireSelectionEvent());this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this,b=this.inherited(arguments);d.when(b,function(b){var h=a.selection,c,f,n;for(c=0;c<b.length;c++)f=a.row(b[c]),(n=f.id in h?h[f.id]:a.allSelected)&&a.select(f,null,n)});return b}})})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(k,m,
d,l,q,s,u){var g=function(){},p=Object.freeze||function(){},c=k.Deferred=function(t){function b(b){if(y)throw Error("This deferred has already been resolved");f=b;y=!0;a()}function a(){for(var a;!a&&v;){var b=v;v=v.next;if(a=b.progress==g)y=!1;var h=B?b.error:b.resolved;q("config-useDeferredInstrumentation")&&B&&m.instrumentRejected&&m.instrumentRejected(f,!!h);if(h)try{var c=h(f);c&&"function"===typeof c.then?c.then(s.hitch(b.deferred,"resolve"),s.hitch(b.deferred,"reject"),s.hitch(b.deferred,"progress")):
(h=a&&void 0===c,a&&!h&&(B=c instanceof Error),b.deferred[h&&B?"reject":"resolve"](h?f:c))}catch(e){b.deferred.reject(e)}else B?b.deferred.reject(f):b.deferred.resolve(f)}}var f,y,e,n,B,h,v,w=this.promise=new d;this.isResolved=w.isResolved=function(){return 0==n};this.isRejected=w.isRejected=function(){return 1==n};this.isFulfilled=w.isFulfilled=function(){return 0<=n};this.isCanceled=w.isCanceled=function(){return e};this.resolve=this.callback=function(a){this.fired=n=0;this.results=[a,null];b(a)};
this.reject=this.errback=function(a){B=!0;this.fired=n=1;q("config-useDeferredInstrumentation")&&m.instrumentRejected&&m.instrumentRejected(a,!!v);b(a);this.results=[null,a]};this.progress=function(a){for(var b=v;b;){var h=b.progress;h&&h(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,g);return this};w.then=this.then=function(b,e,f){var n=f==g?this:new c(w.cancel);b={resolved:b,error:e,progress:f,deferred:n};v?h=h.next=b:v=h=b;y&&a();return n.promise};var C=this;w.cancel=this.cancel=
function(){if(!y){var a=t&&t(C);y||(a instanceof Error||(a=new l(a)),a.log=!1,C.reject(a))}e=!0};p(w)};s.extend(c,{addCallback:function(c){return this.addCallbacks(s.hitch.apply(k,arguments))},addErrback:function(c){return this.addCallbacks(null,s.hitch.apply(k,arguments))},addBoth:function(c){var b=s.hitch.apply(k,arguments);return this.addCallbacks(b,b)},fired:-1});c.when=k.when=u;return c})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(k,m,d){var l={global:k.global,
doc:this.document||null,body:function(d){d=d||k.doc;return d.body||d.getElementsByTagName("body")[0]},setContext:function(d,s){k.global=l.global=d;k.doc=l.doc=s},withGlobal:function(d,s,u,g){var p=k.global;try{return k.global=l.global=d,l.withDoc.call(null,d.document,s,u,g)}finally{k.global=l.global=p}},withDoc:function(q,s,u,g){var p=l.doc,c=d("quirks"),t=d("ie"),b,a,f;try{k.doc=l.doc=q;k.isQuirks=d.add("quirks","BackCompat"==k.doc.compatMode,!0,!0);if(d("ie")&&(f=q.parentWindow)&&f.navigator)b=
parseFloat(f.navigator.appVersion.split("MSIE ")[1])||void 0,(a=q.documentMode)&&(5!=a&&Math.floor(b)!=a)&&(b=a),k.isIE=d.add("ie",b,!0,!0);u&&"string"==typeof s&&(s=u[s]);return s.apply(u,g||[])}finally{k.doc=l.doc=p,k.isQuirks=d.add("quirks",c,!0,!0),k.isIE=d.add("ie",t,!0,!0)}}};m.mixin(k,l);return l})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(k){function m(){throw new TypeError("abstract");}return k.extend(function(){},{then:function(d,l,q){m()},cancel:function(d,l){m()},
isResolved:function(){m()},isRejected:function(){m()},isFulfilled:function(){m()},isCanceled:function(){m()},always:function(d){return this.then(d,d)},otherwise:function(d){return this.then(null,d)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(k,m,d,l,q,s,u,g){function p(a,
b){var c=function(c,e){if("string"==typeof e&&(e=d.byId(e),!e))return new b([]);var f="string"==typeof c?a(c,e):c?c.end&&c.on?c:[c]:[];return f.end&&f.on?f:new b(f)};c.matches=a.match||function(a,b,h){return 0<c.filter([a],b,h).length};c.filter=a.filter||function(a,b,h){return c(b,h).filter(function(b){return-1<q.indexOf(a,b)})};if("function"!=typeof a){var e=a.search;a=function(a,b){return e(b||document,a)}}return c}m.add("array-extensible",function(){return 1==s.delegate([],{length:1}).length&&
!m("bug-for-in-skips-shadowed")});var c=Array.prototype,t=c.slice,b=c.concat,a=q.forEach,f=function(a,b,c){b=[0].concat(t.call(b,0));c=c||k.global;return function(e){b[0]=e;return a.apply(c,b)}},y=function(a){var b=this instanceof e&&m("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var f=b?this:[],g=f.length=c.length,r=0;r<g;r++)f[r]=c[r];if(b)return f;c=f}s._mixin(c,n);c._NodeListCtor=function(a){return e(a)};return c},e=y,n=e.prototype=
m("array-extensible")?[]:{};e._wrap=n._wrap=function(a,b,c){a=new (c||this._NodeListCtor||e)(a);return b?a._stash(b):a};e._adaptAsMap=function(a,b){return function(){return this.map(f(a,arguments,b))}};e._adaptAsForEach=function(a,b){return function(){this.forEach(f(a,arguments,b));return this}};e._adaptAsFilter=function(a,b){return function(){return this.filter(f(a,arguments,b))}};e._adaptWithCondition=function(a,b,c){return function(){var e=arguments,n=f(a,e,c);if(b.call(c||k.global,e))return this.map(n);
this.forEach(n);return this}};a(["slice","splice"],function(a){var b=c[a];n[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});a(["indexOf","lastIndexOf","every","some"],function(a){var b=q[a];n[a]=function(){return b.apply(k,[this].concat(t.call(arguments,0)))}});s.extend(y,{constructor:e,_NodeListCtor:e,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return l(c,a,b)});c.remove=function(){for(var a=
0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var c=t.call(this,0),e=q.map(arguments,function(a){return t.call(a,0)});return this._wrap(b.apply(c,e),this)},map:function(a,b){return this._wrap(q.map(this,a,b),this)},forEach:function(b,c){a(this,b,c);return this},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=B._filterResult(this,b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(q.filter(c,
b[e],b[e+1]),this)},instantiate:function(a,b){var c=s.isFunction(a)?a:s.getObject(a);b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var b=new this._NodeListCtor(0);a(arguments,function(a){0>a&&(a=this.length+a);this[a]&&b.push(this[a])},this);return b._stash(this)}});var B=p(g,y);k.query=p(g,function(a){return y(a)});B.load=function(a,b,c){u.load(a,b,function(a){c(p(a,y))})};k._filterQueryResult=B._filterResult=function(a,b,c){return new y(B.filter(a,b,c))};k.NodeList=B.NodeList=
y;return B})},"dojo/selector/_loader":function(){define(["../has","require"],function(k,m){var d=document.createElement("div");k.add("dom-qsa2.1",!!d.querySelectorAll);k.add("dom-qsa3",function(){try{return d.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==d.querySelectorAll(".TEST:empty").length}catch(l){}});var l;return{load:function(d,s,u,g){g=m;d="default"==d?k("config-selectorEngine")||"css3":d;d="css2"==d||"lite"==d?"./lite":"css2.1"==d?k("dom-qsa2.1")?"./lite":"./acme":"css3"==d?k("dom-qsa3")?
"./lite":"./acme":"acme"==d?"./acme":(g=s)&&d;if("?"==d.charAt(d.length-1)){d=d.substring(0,d.length-1);var p=!0}if(p&&(k("dom-compliant-qsa")||l))return u(l);g([d],function(c){"./lite"!=d&&(l=c);u(c)})}}})},"xstyle/has-class":function(){define(["dojo/has"],function(k){var m={};return function(){for(var d,l=arguments,q=0;q<l.length;q++)if(d=l[q],!m[d]){m[d]=!0;var s=d.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),u=k(s[2]),g=-s[4];if((0<g?g<=u&&(-s[5]||g)>=u:!!u)==!s[1])document.documentElement.className+=
" has-"+d}}})},"dojo/errors/create":function(){define(["../_base/lang"],function(k){return function(m,d,l,q){l=l||Error;var s=function(q){if(l===Error){Error.captureStackTrace&&Error.captureStackTrace(this,s);var g=Error.call(this,q),p;for(p in g)g.hasOwnProperty(p)&&(this[p]=g[p]);this.message=q;this.stack=g.stack}else l.apply(this,arguments);d&&d.apply(this,arguments)};s.prototype=k.delegate(l.prototype,q);s.prototype.name=m;return s.prototype.constructor=s}})},"dojo/_base/array":function(){define(["./kernel",
"../has","./lang"],function(k,m,d){function l(c){return u[c]=new Function("item","index","array",c)}function q(c){var d=!c;return function(b,a,f){var g=0,e=b&&b.length||0,n;e&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=u[a]||l(a));if(f)for(;g<e;++g){if(n=!a.call(f,b[g],g,b),c^n)return!n}else for(;g<e;++g)if(n=!a(b[g],g,b),c^n)return!n;return d}}function s(c){var d=1,b=0,a=0;c||(d=b=a=-1);return function(f,y,e,n){if(n&&0<d)return p.lastIndexOf(f,y,e);n=f&&f.length||0;var l=c?n+a:b;
e===g?e=c?b:n+a:0>e?(e=n+e,0>e&&(e=b)):e=e>=n?n+a:e;for(n&&"string"==typeof f&&(f=f.split(""));e!=l;e+=d)if(f[e]==y)return e;return-1}}var u={},g,p={every:q(!1),some:q(!0),indexOf:s(!0),lastIndexOf:s(!1),forEach:function(c,d,b){var a=0,f=c&&c.length||0;f&&"string"==typeof c&&(c=c.split(""));"string"==typeof d&&(d=u[d]||l(d));if(b)for(;a<f;++a)d.call(b,c[a],a,c);else for(;a<f;++a)d(c[a],a,c)},map:function(c,d,b,a){var f=0,g=c&&c.length||0;a=new (a||Array)(g);g&&"string"==typeof c&&(c=c.split(""));
"string"==typeof d&&(d=u[d]||l(d));if(b)for(;f<g;++f)a[f]=d.call(b,c[f],f,c);else for(;f<g;++f)a[f]=d(c[f],f,c);return a},filter:function(c,d,b){var a=0,f=c&&c.length||0,g=[],e;f&&"string"==typeof c&&(c=c.split(""));"string"==typeof d&&(d=u[d]||l(d));if(b)for(;a<f;++a)e=c[a],d.call(b,e,a,c)&&g.push(e);else for(;a<f;++a)e=c[a],d(e,a,c)&&g.push(e);return g},clearCache:function(){u={}}};d.mixin(k,p);return p})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(k,
m,d){return k([m,d],{})})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(k,m,d,l,q){var s=l.trim,u=d.forEach,g="BackCompat"==q.doc.compatMode,p=!1,c=function(){return!0},t=function(a){a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var b=function(b,c){return s(a.slice(b,c))},c=[],h=-1,e=-1,r=-1,f=-1,d=-1,g=-1,n=-1,v,A="",z="",y,t=0,l=a.length,w=null,x=null,B=function(){0<=g&&(w.id=b(g,t).replace(/\\/g,""),g=-1);if(0<=
n){var a=n==t?null:b(n,t);w[0>"\x3e~+".indexOf(a)?"tag":"oper"]=a;n=-1}0<=d&&(w.classes.push(b(d+1,t).replace(/\\/g,"")),d=-1)};A=z,z=a.charAt(t),t<l;t++)if("\\"!=A)if(w||(y=t,w={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return p?this.otag:this.tag}},n=t),v)z==v&&(v=null);else if("'"==z||'"'==z)v=z;else if(0<=h)if("]"==z){x.attr?x.matchFor=b(r||h+1,t):x.attr=b(h+1,t);if((h=x.matchFor)&&('"'==h.charAt(0)||"'"==h.charAt(0)))x.matchFor=h.slice(1,-1);x.matchFor&&
(x.matchFor=x.matchFor.replace(/\\/g,""));w.attrs.push(x);x=null;h=r=-1}else"\x3d"==z&&(r=0<="|~^$*".indexOf(A)?A:"",x.type=r+z,x.attr=b(h+1,t-r.length),r=t+1);else 0<=e?")"==z&&(0<=f&&(x.value=b(e+1,t)),f=e=-1):"#"==z?(B(),g=t+1):"."==z?(B(),d=t):":"==z?(B(),f=t):"["==z?(B(),h=t,x={}):"("==z?(0<=f&&(x={name:b(f+1,t),value:null},w.pseudos.push(x)),e=t):" "==z&&A!=z&&(B(),0<=f&&w.pseudos.push({name:b(f+1,t)}),w.loops=w.pseudos.length||w.attrs.length||w.classes.length,w.oquery=w.query=b(y,t),w.otag=
w.tag=w.oper?null:w.tag||"*",w.tag&&(w.tag=w.tag.toUpperCase()),c.length&&c[c.length-1].oper&&(w.infixOper=c.pop(),w.query=w.infixOper.query+" "+w.query),c.push(w),w=null);return c},b=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},a=function(a,b){var c=b||[];a&&c.push(a);return c},f=function(a){return 1==a.nodeType},y=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(p?a.getAttribute(b):
a.getAttribute(b,2))||""},e={"*\x3d":function(a,b){return function(c){return 0<=y(c,a).indexOf(b)}},"^\x3d":function(a,b){return function(c){return 0==y(c,a).indexOf(b)}},"$\x3d":function(a,b){return function(c){c=" "+y(c,a);var h=c.lastIndexOf(b);return-1<h&&h==c.length-b.length}},"~\x3d":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+y(b,a)+" ").indexOf(c)}},"|\x3d":function(a,b){var c=b+"-";return function(h){h=y(h,a);return h==b||0==h.indexOf(c)}},"\x3d":function(a,b){return function(c){return y(c,
a)==b}}},n="undefined"==typeof q.doc.firstChild.nextElementSibling,B=!n?"nextElementSibling":"nextSibling",h=!n?"previousElementSibling":"previousSibling",v=n?f:c,w=function(a){for(;a=a[h];)if(v(a))return!1;return!0},C=function(a){for(;a=a[B];)if(v(a))return!1;return!0},G=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,h=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,r=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!h)return-1;h=h.length;if(r==
h&&0<=e&&0<=r)return e;m("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",h):b._l=h;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[B])v(b)&&(m("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(e=c));return e},r=function(a){return!(G(a)%2)},z=function(a){return G(a)%2},A={checked:function(a,b){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return w},
"last-child":function(){return C},"only-child":function(a,b){return function(a){return w(a)&&C(a)}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=t(b)[0],h={el:1};"*"!=c.tag&&(h.tag=1);c.classes.length||(h.classes=1);var e=E(c,h);return function(a){return!e(a)}},
"nth-child":function(a,b){var c=parseInt;if("odd"==b)return z;if("even"==b)return r;if(-1!=b.indexOf("n")){var h=b.split("n",2),e=h[0]?"-"==h[0]?-1:c(h[0]):1,f=h[1]?c(h[1]):0,d=0,g=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(d=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(g=f,f%=e));if(0<e)return function(a){a=G(a);return a>=d&&(0>g||a<=g)&&a%e==f};b=f}var n=c(b);return function(a){return G(a)==n}}},x=9>m("ie")||9==m("ie")&&m("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return p?
c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},E=function(a,h){if(!a)return c;h=h||{};var r=null;"el"in h||(r=b(r,f));"tag"in h||"*"!=a.tag&&(r=b(r,function(b){return b&&(p?b.tagName:b.tagName.toUpperCase())==a.getTag()}));"classes"in h||u(a.classes,function(a,c,h){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");r=b(r,function(a){return e.test(a.className)});r.count=c});"pseudos"in h||u(a.pseudos,function(a){var c=a.name;A[c]&&(r=b(r,A[c](c,a.value)))});
"attrs"in h||u(a.attrs,function(a){var c,h=a.attr;a.type&&e[a.type]?c=e[a.type](h,a.matchFor):h.length&&(c=x(h));c&&(r=b(r,c))});"id"in h||a.id&&(r=b(r,function(b){return!!b&&b.id==a.id}));r||"default"in h||(r=c);return r},D=function(a){return function(b,c,h){for(;b=b[B];)if(!n||f(b)){(!h||K(b,h))&&a(b)&&c.push(b);break}return c}},F=function(a){return function(b,c,h){for(b=b[B];b;){if(v(b)){if(h&&!K(b,h))break;a(b)&&c.push(b)}b=b[B]}return c}},L=function(a){a=a||c;return function(b,c,h){for(var e=
0,r=b.children||b.childNodes;b=r[e++];)v(b)&&((!h||K(b,h))&&a(b,e))&&c.push(b);return c}},H={},I=function(b){var h=H[b.query];if(h)return h;var e=b.infixOper,e=e?e.oper:"",r=E(b,{el:1}),f="*"==b.tag,d=q.doc.getElementsByClassName;if(e)d={el:1},f&&(d.tag=1),r=E(b,d),"+"==e?h=D(r):"~"==e?h=F(r):"\x3e"==e&&(h=L(r));else if(b.id)r=!b.loops&&f?c:E(b,{el:1,id:1}),h=function(c,h){var e=k.byId(b.id,c.ownerDocument||c);if(e&&r(e)){if(9==c.nodeType)return a(e,h);for(var f=e.parentNode;f&&f!=c;)f=f.parentNode;
if(f)return a(e,h)}};else if(d&&/\{\s*\[native code\]\s*\}/.test(String(d))&&b.classes.length&&!g)var r=E(b,{el:1,classes:1,id:1}),n=b.classes.join(" "),h=function(b,c,h){c=a(0,c);for(var e,f=0,d=b.getElementsByClassName(n);e=d[f++];)r(e,b)&&K(e,h)&&c.push(e);return c};else!f&&!b.loops?h=function(c,h,e){h=a(0,h);for(var r=0,f=b.getTag(),f=f?c.getElementsByTagName(f):[];c=f[r++];)K(c,e)&&h.push(c);return h}:(r=E(b,{el:1,tag:1,id:1}),h=function(c,h,e){h=a(0,h);for(var f,d=0,g=(f=b.getTag())?c.getElementsByTagName(f):
[];f=g[d++];)r(f,c)&&K(f,e)&&h.push(f);return h});return H[b.query]=h},M={},O={},P=function(b){var c=t(s(b));if(1==c.length){var h=I(c[0]);return function(a){if(a=h(a,[]))a.nozip=!0;return a}}return function(b){b=a(b);for(var h,e,r=c.length,f,d,g=0;g<r;g++){d=[];h=c[g];e=b.length-1;0<e&&(f={},d.nozip=!0);e=I(h);for(var n=0;h=b[n];n++)e(h,d,f);if(!d.length)break;b=d}return d}},S=m("ie")?"commentStrip":"nozip",Q=!!q.doc.querySelectorAll,T=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,U=function(a,b,c,h){return c?
(b?b+" ":"")+c+(h?" "+h:""):a},V=/([^[]*)([^\]]*])?/g,W=function(a,b,c){return b.replace(T,U)+(c||"")},R=function(a,b){a=a.replace(V,W);if(Q){var c=O[a];if(c&&!b)return c}if(c=M[a])return c;var c=a.charAt(0),h=-1==a.indexOf(" ");0<=a.indexOf("#")&&h&&(b=!0);if(Q&&!b&&-1=="\x3e~+".indexOf(c)&&(!m("ie")||-1==a.indexOf(":"))&&!(g&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|\x3d")){var e=0<="\x3e~+".indexOf(a.charAt(a.length-1))?a+" *":a;return O[a]=function(b){try{if(!(9==
b.nodeType||h))throw"";var c=b.querySelectorAll(e);c[S]=!0;return c}catch(r){return R(a,!0)(b)}}}var r=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return M[a]=2>r.length?P(a):function(a){for(var b=0,c=[],h;h=r[b++];)c=c.concat(P(h)(a));return c}},J=0,X=m("ie")?function(a){return p?a.getAttribute("_uid")||a.setAttribute("_uid",++J)||J:a.uniqueID}:function(a){return a._uid||(a._uid=++J)},K=function(a,b){if(!b)return 1;var c=X(a);return!b[c]?b[c]=1:0},Y=function(a){if(a&&a.nozip)return a;
if(!a||!a.length)return[];if(2>a.length)return[a[0]];var b=[];J++;var c,h;if(m("ie")&&p){var e=J+"";for(c=0;c<a.length;c++)if((h=a[c])&&h.getAttribute("_zipIdx")!=e)b.push(h),h.setAttribute("_zipIdx",e)}else if(m("ie")&&a.commentStrip)try{for(c=0;c<a.length;c++)(h=a[c])&&f(h)&&b.push(h)}catch(r){}else for(c=0;c<a.length;c++)if((h=a[c])&&h._zipIdx!=J)b.push(h),h._zipIdx=J;return b},N=function(a,b){b=b||q.doc;p="div"===(b.ownerDocument||b).createElement("div").tagName;var c=R(a)(b);return c&&c.nozip?
c:Y(c)};N.filter=function(a,b,c){for(var h=[],e=t(b),e=1==e.length&&!/[^\w#\.]/.test(b)?E(e[0]):function(a){return-1!=d.indexOf(N(b,k.byId(c)),a)},r=0,f;f=a[r];r++)e(f)&&h.push(f);return h};return N})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),function(k,m,d,l,q,s,u){function g(b,a){a&&a.nodeType&&b.appendChild(a)}function p(b,a,c,d){if(this.formatter){d=this.formatter;var e=this.grid.formatterScope;
c.innerHTML="string"===typeof d&&e?e[d](a,b):d(a,b)}else null!=a&&c.appendChild(document.createTextNode(a))}var c=8>l("ie")&&!l("quirks"),t=/[^\._a-zA-Z0-9-]/g;m=m(s,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(b){return"string"==typeof b?this.columns[b]:this.cell(b).column},listType:"grid",cell:function(b,a){if(b.column&&b.element)return b;b.target&&b.target.nodeType&&(b=b.target);var c;if(b.nodeType){do{if(this._rowIdToObject[b.id])break;var d=b.columnId;if(d){a=
d;c=b;break}b=b.parentNode}while(b&&b!=this.domNode)}if(!c&&"undefined"!=typeof a){var e=this.row(b);if(d=e&&e.element)for(var d=d.getElementsByTagName("td"),g=0;g<d.length;g++)if(d[g].columnId==a){c=d[g];break}}if(null!=b)return{row:e||this.row(b),column:a&&this.column(a),element:c}},createRowCells:function(b,a,f){var d=q("table.dgrid-row-table[role\x3dpresentation]"),e=9>l("ie")||l("quirks")?q(d,"tbody"):d,g,p,h,v,w,s,m,r,z,A;f=f||this.subRows;p=0;for(h=f.length;p<h;p++){s=f[p];g=q(e,"tr");s.className&&
q(g,"."+s.className);v=0;for(w=s.length;v<w;v++){m=s[v];r=m.id;z=m.className||m.field&&"field-"+m.field;z=q(b+(".dgrid-cell.dgrid-cell-padding"+(r?".dgrid-column-"+r:"")+(z?"."+z:"")).replace(t,"-")+"[role\x3d"+("th"===b?"columnheader":"gridcell")+"]");z.columnId=r;c?(r=q(z,"!dgrid-cell-padding div.dgrid-cell-padding"),z.contents=r):r=z;if(A=m.colSpan)z.colSpan=A;if(A=m.rowSpan)z.rowSpan=A;a(r,m);g.appendChild(z)}}return d},left:function(b,a){b.element||(b=this.cell(b));return this.cell(this._move(b,
-(a||1),"dgrid-cell"))},right:function(b,a){b.element||(b=this.cell(b));return this.cell(this._move(b,a||1,"dgrid-cell"))},renderRow:function(b,a){var c=this.createRowCells("td",function(c,e){var f=b;e.get?f=e.get(b):"field"in e&&"_item"!=e.field&&(f=f[e.field]);e.renderCell?g(c,e.renderCell(b,f,c,a)):p.call(e,b,f,c,a)},a&&a.subRows);return q("div[role\x3drow]\x3e",c)},renderHeader:function(){var b=this,a=this.headerNode,f=a.childNodes.length;for(a.setAttribute("role","row");f--;)q(a.childNodes[f],
"!");f=this.createRowCells("th",function(a,b){var f=b.headerNode=a;c&&(a=a.parentNode);var d=b.field;d&&(a.field=d);if(b.renderHeaderCell)g(f,b.renderHeaderCell(f));else if("label"in b||b.field)f.appendChild(document.createTextNode("label"in b?b.label:b.field));!1!==b.sortable&&(d&&"_item"!=d)&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[f.id=this.id+"-header"]=this.columns;a.appendChild(f);this._sortListener&&this._sortListener.remove();
this._sortListener=d(f,"click,keydown",function(c){if("click"==c.type||32==c.keyCode||!l("opera")&&13==c.keyCode){var e=c.target,f,g,h;do if(e.sortable){h=[{attribute:f=e.field||e.columnId,descending:(g=b._sort[0])&&g.attribute==f&&!g.descending}];f={bubbles:!0,cancelable:!0,grid:b,parentType:c.type,sort:h};d.emit(c.target,"dgrid-sort",f)&&(b._sortNode=e,b.set("sort",h));break}while((e=e.parentNode)&&e!=a)}})},resize:function(){var b=this.headerNode.firstChild,a=this.contentNode,c;this.inherited(arguments);
if(!l("ie")||7<l("ie")&&!l("quirks"))if(a.style.width="",a&&b&&(c=b.offsetWidth)!=a.offsetWidth)a.style.width=c+"px"},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(b,a){this.inherited(arguments);this.updateSortArrow(this._sort)},updateSortArrow:function(b,a){this._lastSortedArrow&&(q(this._lastSortedArrow,"\x3c!dgrid-sort-up!dgrid-sort-down"),q(this._lastSortedArrow,"!"),delete this._lastSortedArrow);a&&(this._sort=
b);if(b[0]){var c=b[0].attribute,d=b[0].descending,e=this._sortNode,g,t,h;delete this._sortNode;if(!e)for(h in g=this.columns,g)if(t=g[h],t.field==c){e=t.headerNode;break}e&&(e=e.contents||e,this._lastSortedArrow=q(e.firstChild,"-div.dgrid-sort-arrow.ui-icon[role\x3dpresentation]"),this._lastSortedArrow.innerHTML="\x26nbsp;",q(e,d?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(b,a){return this.addCssRule("#"+u.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+b,a)},
_configColumns:function(b,a){var c=[],d=a instanceof Array;u.each(a,function(e,g){"string"==typeof e&&(a[g]=e={label:e});!d&&!e.field&&(e.field=g);g=e.id=e.id||(isNaN(g)?g:b+g);d&&(this.columns[g]=e);this._configColumn&&this._configColumn(e,g,a,b);e.grid=this;"function"===typeof e.init&&e.init();c.push(e)},this);return d?a:c},_destroyColumns:function(){var b=this.subRows,a=b&&b.length,c,d,e,g;this.cleanup();for(c=0;c<a;c++){d=0;for(g=b[c].length;d<g;d++)e=b[c][d],"function"===typeof e.destroy&&e.destroy()}},
configStructure:function(){var b=this.subRows,a=this._columns=this.columns;this.columns=!a||a instanceof Array?{}:a;if(b)for(a=0;a<b.length;a++)b[a]=this._configColumns(a+"-",b[a]);else this.subRows=[this._configColumns("",a)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(b){this._destroyColumns();this.subRows=null;this.columns=b;this._updateColumns()},_setSubRows:function(b){this._destroyColumns();this.subRows=b;this._updateColumns()},setColumns:function(b){k.deprecated("setColumns(...)",
'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",b)},setSubRows:function(b){k.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",b)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});m.appendIfNode=g;m.defaultRenderCell=p;return m})},"dojo/dom":function(){define(["./sniff",
"./_base/window"],function(k,m){if(7>=k("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}var l={};k("ie")?l.byId=function(d,l){if("string"!=typeof d)return d;var g=l||m.doc,p=d&&g.getElementById(d);if(p&&(p.attributes.id.value==d||p.id==d))return p;g=g.all[d];if(!g||g.nodeName)g=[g];for(var c=0;p=g[c++];)if(p.attributes&&p.attributes.id&&p.attributes.id.value==d||p.id==d)return p}:l.byId=function(d,l){return("string"==typeof d?(l||m.doc).getElementById(d):d)||null};l.isDescendant=
function(d,q){try{d=l.byId(d);for(q=l.byId(q);d;){if(d==q)return!0;d=d.parentNode}}catch(g){}return!1};k.add("css-user-select",function(d,l,g){if(!g)return!1;d=g.style;l=["Khtml","O","ms","Moz","Webkit"];g=l.length;var p="userSelect";do if("undefined"!==typeof d[p])return p;while(g--&&(p=l[g]+"UserSelect"));return!1});var q=k("css-user-select");l.setSelectable=q?function(d,m){l.byId(d).style[q]=m?"":"none"}:function(d,q){d=l.byId(d);var g=d.getElementsByTagName("*"),p=g.length;if(q)for(d.removeAttribute("unselectable");p--;)g[p].removeAttribute("unselectable");
else for(d.setAttribute("unselectable","on");p--;)g[p].setAttribute("unselectable","on")};return l})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(k,m,d,l,q,s,u){function g(c){return c}function p(c){if("object"!==typeof c)c=Error(c);else if("cancel"===c.dojoType)return;c.grid=this;q.emit(this.domNode,"dgrid-error",{grid:this,error:c,cancelable:!0,bubbles:!0})}return m(null,
{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};s.before(this,"configStructure",d.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(c){c.set&&
(this._columnsWithSet[c.field]=c)},_updateNotifyHandle:function(c){this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle);"function"===typeof c.notify&&(this._notifyHandle=s.after(c,"notify",d.hitch(this,"_onNotify"),!0))},_setStore:function(c,d,b){this._updateNotifyHandle(c);this.store=c;this.dirty={};this.set("query",d,b)},_setQuery:function(c,d){var b=d&&d.sort;this.query=void 0!==c?c:this.query;this.queryOptions=d||this.queryOptions;b?this.set("sort",b):this.refresh()},setStore:function(c,
d,b){k.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",c,d,b)},setQuery:function(c,d){k.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",c,d)},_getQueryOptions:function(){var c=d.delegate(this.queryOptions,{});this._sort.length&&(c.sort=this._sort);return c},_getQuery:function(){var c=this.query;return"object"==typeof c&&null!=c?d.delegate(c,{}):c},_setSort:function(c,d){this.store&&(this._lastCollection=null);this.inherited(arguments)},
_onNotify:function(c,d){this.inherited(arguments);c&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},insertRow:function(c,g,b,a,f){var p=this.store,e=this.dirty,p=p&&p.getIdentity(c),n;p in e&&!(p in this._updating)&&(n=e[p]);n&&(c=d.delegate(c,n));return this.inherited(arguments)},updateDirty:function(c,d,b){var a=this.dirty,f=a[c];f||(f=a[c]={});f[d]=b},setDirty:function(c,d,b){k.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(c,d,b)},save:function(){function c(c,
e){return function(f){var g=d._columnsWithSet,p=d._updating,r,z;if("function"===typeof f.set)f.set(e);else for(r in e)f[r]=e[r];for(r in g)z=g[r].set(f),void 0!==z&&(f[r]=z);p[c]=!0;return l.when(b.put(f),function(){delete a[c];delete p[c]})}}var d=this,b=this.store,a=this.dirty,f=new l,g=f.promise,e=function(a){var c;return d.getBeforePut||!(c=d.row(a).data)?function(){return b.get(a)}:function(){return c}},p;for(p in a)var q=c(p,a[p]),g=g.then(e(p)).then(q);f.resolve();return g},revert:function(){this.dirty=
{};this.refresh()},_trackError:function(c){var t;"string"==typeof c&&(c=d.hitch(this,c));try{t=c()}catch(b){p.call(this,b)}return l.when(t,g,d.hitch(this,p))},newRow:function(){this.noDataNode&&(u(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(c,d){var b={element:c};!d&&(this.noDataMessage&&this.up(b).element===c&&this.down(b).element===c)&&(this.noDataNode=u(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},
"put-selector/put":function(){(function(k){var m,d=/[-+,> ]/;k([],m=function(l,q){function k(t){function b(){n&&(e&&n!=e)&&(e==t&&(a||(a=d.test(w)&&l.createDocumentFragment()))?a:e).insertBefore(n,q||null)}for(var a,f,q,e,n,m=arguments,h=m[0],v=0;v<m.length;v++){var w=m[v];if("object"==typeof w){f=!1;if(w instanceof Array){n=l.createDocumentFragment();for(var C=0;C<w.length;C++)n.appendChild(k(w[C]));w=n}if(w.nodeType)n=w,b(),e=w,q=0;else for(C in w)n[C]=w[C]}else if(f)f=!1,n.appendChild(l.createTextNode(w));
else{1>v&&(t=null);f=!0;if(h=w.replace(u,function(a,h,d,f,x,u){h&&(b(),"-"==h||"+"==h?(e=(q=n||e).parentNode,n=null,"+"==h&&(q=q.nextSibling)):("\x3c"==h?e=n=(n||e).parentNode:(","==h?e=t:n&&(e=n),n=null),q=0),n&&(e=n));if((a=!d&&f)||!n&&(d||x))"$"==a?(a=m[++v],e.appendChild(l.createTextNode(a))):(a=a||k.defaultTag,(h=c&&m[v+1]&&m[v+1].name)&&(a="\x3c"+a+' name\x3d"'+h+'"\x3e'),n=p&&~(g=a.indexOf("|"))?l.createElementNS(p[a.slice(0,g)],a.slice(g+1)):l.createElement(a));if(d)if("$"==f&&(f=m[++v]),
"#"==d)n.id=f;else if(h=(a=n.className)&&(" "+a+" ").replace(" "+f+" "," "),"."==d)n.className=a?(h+f).substring(1):f;else if("!"==w){var C;c?k("div",n,"\x3c").innerHTML="":(C=n.parentNode)&&C.removeChild(n)}else h=h.substring(1,h.length-1),h!=a&&(n.className=h);x&&("$"==u&&(u=m[++v]),"style"==x?n.style.cssText=u:(d="!"==x.charAt(0)?(x=x.substring(1))&&"removeAttribute":"setAttribute",u=""===u?x:u,p&&~(g=x.indexOf("|"))?n[d+"NS"](p[x.slice(0,g)],x.slice(g+1),u):n[d](x,u)));return""}))throw new SyntaxError("Unexpected char "+
h+" in "+w);b();e=h=n||e}}t&&a&&t.appendChild(a);return h}d=q||d;var u=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,g,p=!1;l=l||document;var c="object"==typeof l.createElement;k.addNamespace=function(c,b){l.createElementNS?(p||(p={}))[c]=b:l.namespaces.add(c,b)};k.defaultTag="div";k.forDocument=m;return k})})(function(k,m,d){d=d||m;"function"===typeof define?define([],function(){return d()}):"undefined"==typeof window?require("./node-html")(module,d):put=
d()})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(k,m,d,l){function q(b,a,c){a&&a.stack&&a.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")}function s(b,a,c,d){a||q(b,c,d)}function u(b,a,d,q){a?l.some(p,function(a,c){if(a.error===b)return p.splice(c,1),!0}):l.some(p,function(a){return a.error===b})||p.push({error:b,rejection:d,deferred:q,timestamp:(new Date).getTime()});c||(c=setTimeout(g,t))}function g(){var b=(new Date).getTime(),
a=b-t;p=l.filter(p,function(b){return b.timestamp<a?(q(b.error,b.rejection,b.deferred),!1):!0});c=p.length?setTimeout(g,p[0].timestamp+t-b):!1}var p=[],c=!1,t=1E3;return function(b){var a=m("config-useDeferredInstrumentation");if(a){k.on("resolved",d.hitch(console,"log","resolved"));k.on("rejected",d.hitch(console,"log","rejected"));k.on("progress",d.hitch(console,"log","progress"));var c=[];"string"===typeof a&&(c=a.split(","),a=c.shift());if("report-rejections"===a)b.instrumentRejected=s;else if("report-unhandled-rejections"===
a||!0===a||1===a)b.instrumentRejected=u,t=parseInt(c[0],10)||t;else throw Error("Unsupported instrumentation usage \x3c"+a+"\x3e");}}})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on ./util/misc put-selector/put".split(" "),function(k,m,d,l,q,s,u,g){return d([k,m],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:1,pagingMethod:"debounce",pagingDelay:u.defaultDelay,
keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var d=this;s(this.bodyNode,"scroll",u[this.pagingMethod](function(c){d._processScroll(c)},null,this.pagingDelay))},renderQuery:function(d,c,t){function b(b){g(k,"!");if(b)throw a._refreshDeferred&&(a._refreshDeferred.reject(b),delete a._refreshDeferred),b;}var a=this,f={query:d,count:0,node:c,options:t},m=this.preload,e;if(!c){var n={node:g(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:d,next:f,options:t};
n.node.style.height="0";f.node=c=g(this.contentNode,"div.dgrid-preload");f.previous=n}c.rowIndex=this.minRowsPerPage;m?((f.next=m.next)&&this.bodyNode.scrollTop>=m.node.offsetTop?f.previous=m:(f.next=m,f.previous=m.previous),f.previous.next=f,f.next.previous=f):this.preload=f;var k=g(c,"-div.dgrid-loading");g(k,"div.dgrid-below").innerHTML=this.loadingMessage;t=l.mixin(this.get("queryOptions"),t,{start:0,count:this.minRowsPerPage,query:d});this._trackError(function(){return e=d(t)});if("undefined"===
typeof e)b();else return q.when(a.renderArray(e,c,t),function(h){return q.when("undefined"===typeof e.total?e.length:e.total,function(b){var d=h.length,p=c.parentNode,n=a.noDataNode;g(k,"!");a._total=b;0===b&&(n&&(g(n,"!"),delete a.noDataNode),a.noDataNode=n=g("div.dgrid-no-data"),p.insertBefore(n,a._getFirstRowSibling(p)),n.innerHTML=a.noDataMessage);for(n=p=0;n<d;n++)p+=a._calcRowHeight(h[n]);d&&p&&(a.rowHeight=p/d);b-=d;f.count=b;c.rowIndex=d;b?c.style.height=Math.min(b*a.rowHeight,a.maxEmptySpace)+
"px":c.style.display="none";a._previousScrollPosition&&(a.scrollTo(a._previousScrollPosition),delete a._previousScrollPosition);a._processScroll();a._refreshDeferred&&(a._refreshDeferred.resolve(e),delete a._refreshDeferred);return h},b)},b),e},refresh:function(d){var c=this,g=d&&d.keepScrollPosition,b;"undefined"===typeof g&&(g=this.keepScrollPosition);g&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return g=this._refreshDeferred=new q,b=c.renderQuery(function(a){return c.store.query(c.query,
a)}),"undefined"===typeof b&&g.reject(),g.then(function(a){setTimeout(function(){s.emit(c.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:c,results:a})},0);delete c._refreshDeferred;return a},function(a){delete c._refreshDeferred;throw a;})},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(d){return d.lastChild},_calcRowHeight:function(d){var c=d.previousSibling;return c&&c.offsetTop!=d.offsetTop?d.offsetHeight:0},lastScrollTop:0,_processScroll:function(d){function c(b,
c,h,d){var e=a.farOffRemoval,f=b.node;if(c>2*e){for(var r,v=f[h],n=0,z=0,A=[];r=v;){var k=a._calcRowHeight(r);if(n+k+e>c||0>v.className.indexOf("dgrid-row")&&0>v.className.indexOf("dgrid-loading"))break;v=r[h];n+=k;z+=r.count||1;a.removeRow(r,!0);A.push(r)}b.count+=z;d?(f.rowIndex-=z,t(b)):f.style.height=f.offsetHeight+n+"px";var p=g("div",A);setTimeout(function(){g(p,"!")},1)}}function t(b,c){b.node.style.height=Math.min(b.count*a.rowHeight,c?Infinity:a.maxEmptySpace)+"px"}function b(a,b){do a=b?
a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var a=this,f=a.bodyNode;d=d&&d.scrollTop||this.getScrollPosition().y;var m=f.offsetHeight+d,e,n,k=a.preload,h=a.lastScrollTop,v=a.bufferRows*a.rowHeight,w=v-a.rowHeight,u,s,r,z=!0;for(a.lastScrollTop=d;k&&!k.node.offsetWidth;)k=k.previous;for(;k&&k!=e;){e=a.preload;a.preload=k;n=k.node;var A=n.offsetTop;if(m+1+w<A)k=b(k,z=!1);else if(d-1-w>A+n.offsetHeight)k=b(k,z=!0);else{var x=((n.rowIndex?d-v:m)-A)/a.rowHeight,A=(m-d+2*v)/a.rowHeight,E=Math.max(Math.min((d-
h)*a.rowHeight,a.maxRowsPerPage/2),a.maxRowsPerPage/-2),A=A+Math.min(Math.abs(E),10);0==n.rowIndex&&(x-=A);x=Math.max(x,0);10>x&&(0<x&&A+x<a.maxRowsPerPage)&&(A+=Math.max(0,x),x=0);A=Math.min(Math.max(A,a.minRowsPerPage),a.maxRowsPerPage,k.count);if(0==A)k=b(k,z);else{var A=Math.ceil(A),x=Math.min(Math.floor(x),k.count-A),D=l.mixin(a.get("queryOptions"),k.options);k.count-=A;var F=n,L,H=a.queryRowsOverlap;if(E=0<n.rowIndex&&k){var I=k.previous;I&&(c(I,d-(I.node.offsetTop+I.node.offsetHeight),"nextSibling"),
0<x&&I.node==n.previousSibling?(x=Math.min(k.count,x),k.previous.count+=x,t(k.previous,!0),n.rowIndex+=x,H=0):A+=x,k.count-=x);D.start=n.rowIndex-H;D.count=Math.min(A+H,a.maxRowsPerPage);n.rowIndex=D.start+D.count}else k.next&&(c(k.next,k.next.node.offsetTop-m,"previousSibling",!0),F=n.nextSibling,F==k.next.node?(k.next.count+=k.count-x,k.next.node.rowIndex=x+A,t(k.next),k.count=x,H=0):L=!0),D.start=k.count,D.count=Math.min(A+H,a.maxRowsPerPage);L&&(F&&F.offsetWidth)&&(L=F.offsetTop);t(k);n=g(F,"-div.dgrid-loading[style\x3dheight:"+
A*a.rowHeight+"px]");g(n,"div.dgrid-"+(E?"below":"above")).innerHTML=a.loadingMessage;n.count=A;D.query=k.query;if(!(D.start>a._total||0>D.count)){var M=k.query(D);if(void 0===a._trackError(function(){return M})){g(n,"!");return}(function(b,c,h,d,e){r=q.when(a.renderArray(e,b,D),function(c){s=e;F=b.nextSibling;g(b,"!");if(d&&F&&F.offsetWidth){var f=a.getScrollPosition();a.scrollTo({x:f.x,y:f.y+F.offsetTop-d,preserveMomentum:!0})}q.when(e.total||e.length,function(b){a._total=b;h&&(h.count=b-h.node.rowIndex,
t(h))});a._processScroll();return c},function(a){g(b,"!");throw a;})}).call(this,n,f,E,L,M);k=k.previous}}}}if(r&&(u=this._refreshDeferred))delete this._refreshDeferred,q.when(r,function(){u.resolve(s)})},removeRow:function(d,c){if(d){var g=d.previousSibling,b=d.nextSibling,g=g&&(null!=g.observerIndex?g.observerIndex:g.previousObserverIndex),a=b&&(null!=b.observerIndex?b.observerIndex:b.nextObserverIndex),b=d.observerIndex;d.observerIndex=void 0;c&&(d.nextObserverIndex=a,d.previousObserverIndex=g);
if(-1<b&&(b!==g&&b!==a)&&(g=this.observers,a=g[b]))a.cancel(),this._numObservers--,g[b]=0}this.inherited(arguments)}})})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(k,m,d){function l(d){setTimeout(function(){s.apply(q,d)},0)}var q=new d,s=q.emit;q.emit=null;m.prototype.trace=function(){var d=k._toArray(arguments);this.then(function(g){l(["resolved",g].concat(d))},function(g){l(["rejected",g].concat(d))},function(g){l(["progress",g].concat(d))});return this};
m.prototype.traceRejected=function(){var d=k._toArray(arguments);this.otherwise(function(g){l(["rejected",g].concat(d))});return this};return q})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(k,m,d,l,q,s,u,g){function p(a,b){var c=document.body,d;g(c,a,".dgrid-scrollbar-measure");d=a["offset"+b]-a["client"+b];g(a,"!dgrid-scrollbar-measure");
c.removeChild(a);return d}function c(a){var b=a?"."+a.replace(n,"."):"";this._class&&(b="!"+this._class.replace(n,"!")+b);g(this.domNode,b);this._class=a}function t(){return this._class}function b(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function a(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)}u("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var f,y;l.add("dom-scrollbar-width",
function(a,b,c){return p(c,"Width")});l.add("dom-scrollbar-height",function(a,b,c){return p(c,"Height")});var e=0,n=/ +/g,B=7>l("ie")&&!l("quirks")?function(){var a,b,c;if(this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==a))this.resize(),this._prevWinDims=[b,a]}:function(){this._started&&this.resize()};return m(l("touch")?s:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:!0,
postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,b){var d=this.domNode=b||g("div"),f;a?(this.params=a,m.safeMixin(this,a),f=a["class"]||a.className||d.className,this._sort=a.sort||[],delete this.sort):this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject=
{};this.postMixInProperties&&this.postMixInProperties();this.id=d.id=d.id||this.id||"dgrid_"+e++;this.buildRendering();f&&c.call(this,f);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,c,e,f,r;r=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";g(a,"[role\x3dgrid].ui-widget.dgrid.dgrid-"+this.listType);c=this.headerNode=g(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+
(this.showHeader?"":".dgrid-header-hidden"));(l("quirks")||8>l("ie"))&&g(a,"div.dgrid-spacer");e=this.bodyNode=g(a,"div.dgrid-scroller");e.tabIndex=-1;this.headerScrollNode=g(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");f=this.footerNode=g("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));g(a,f);r&&(a.className+=" dgrid-rtl"+(l("webkit")?"":" dgrid-rtl-nonwebkit"));d(e,"scroll",function(f){b.showHeader&&(c.scrollLeft=f.scrollLeft||e.scrollLeft);f.stopPropagation();
d.emit(a,"scroll",{scrollTarget:e})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=g(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=d(window,"resize",q.throttleDelayed(B,this)))},postCreate:l("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var a=
this.bodyNode,b=this.headerNode,c=this.footerNode,d=b.offsetHeight,e=this.showFooter?c.offsetHeight:0,r=l("quirks")||7>l("ie");this.headerScrollNode.style.height=a.style.marginTop=d+"px";a.style.marginBottom=e+"px";r&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-d-e,0)+"px",e&&(c.style.bottom="1px",setTimeout(function(){c.style.bottom=""},0)));f||(f=l("dom-scrollbar-width"),y=l("dom-scrollbar-height"),l("ie")&&(f++,y++),q.addCssRule(".dgrid-scrollbar-width","width: "+f+"px"),
q.addCssRule(".dgrid-scrollbar-height","height: "+y+"px"),17!=f&&!r&&(q.addCssRule(".dgrid-header","right: "+f+"px"),q.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+f+"px")));r&&(b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,b){var c=q.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(a,b){var c=d(this.domNode,a,b);l("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=
this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();g(this.domNode,"!");this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=
0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,c,d,e){if(b){var f=this.insertRow(a,b,c,d,e);g(f,".ui-state-highlight");setTimeout(function(){g(f,"!ui-state-highlight")},250);return f}},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+" ").indexOf("dgrid-row ")&&g(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!=
b)}},renderArray:function(a,b,c){function d(a){s=g.insertRow(a,t,null,n++,c);s.observerIndex=q;return s}function e(a){"undefined"!==typeof q&&(k[q].cancel(),k[q]=0,g._numObservers--);if(a)throw a;}function f(a){(m=b?b.parentNode:g.contentNode)&&m.parentNode&&(m!==g.contentNode||a.length)?(m.insertBefore(t,b||null),(s=a[a.length-1])&&g.adjustRowIndices(s)):k[q]&&e();return p=a}c=c||{};var g=this,n=c.start||0,k=this.observers,l,p,m,q;b||(this._lastCollection=a);a.observe&&(g._numObservers++,q=k.push(a.observe(function(a,
d,e){var h,f,r;-1<d&&p[d]&&(l=p.splice(d,1)[0],l.parentNode==m&&((h=l.nextSibling)&&d!=e&&h.rowIndex--,g.removeRow(l)),g._processScroll&&g._processScroll());if(-1<e){if(p.length){if(f=p[e],!f&&(f=p[e-1]))f=(f.connected||f).nextSibling}else f=g._getFirstRowSibling&&g._getFirstRowSibling(m);r=b&&b.parentNode||f&&f.parentNode||g.contentNode;if(l=g.newRow(a,r,f,c.start+e,c))if(l.observerIndex=q,p.splice(e,0,l),!h||e<d)h=l.previousSibling,h=!h||h.rowIndex+1==l.rowIndex||0==l.rowIndex?l:h;c.count++}d!=
e&&h&&g.adjustRowIndices(h);g._onNotification(p,a,d,e)},!0))-1);var t=document.createDocumentFragment(),s;if(a.map){if(p=a.map(d,console.error),p.then)return p.then(f,e)}else{p=[];for(var u=0,y=a.length;u<y;u++)p[u]=d(a[u])}return f(p)},_onNotification:function(a,b,c,d){},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,d,e){var f=e.parentId,f=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),g=document.getElementById(f),n=g&&g.previousSibling;
g&&this.removeRow(g);g=this.renderRow(a,e);g.className=(g.className||"")+" ui-state-default dgrid-row "+(1==d%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[g.id=f]=a;b.insertBefore(g,c||null);n&&this.adjustRowIndices(n);g.rowIndex=d;return g},renderRow:function(a,b){return g("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||g(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=
a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f;f=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(c+" ")){f=e;b+=0>b?
1:-1;break}while(a=(!d||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,e===this.bodyNode||e===this.headerNode)break;while(b);return f},up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:l("touch")?function(b){return this.useTouchScroll?this.inherited(arguments):a.call(this,b)}:a,getScrollPosition:l("touch")?function(){return this.useTouchScroll?
this.inherited(arguments):b.call(this)}:b,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:t,_setClass:c,_getClassName:t,_setClassName:c,_setSort:function(a,b){this._sort=
"string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var e=c[a],f=d[a];void 0===e&&(e="");void 0===f&&(f="");return e==f?0:e>f==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,b){k.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=
this.headerNode;this.showHeader=a;g(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){k.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;g(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put dojo/_base/Deferred dojo/_base/sniff".split(" "),
function(k,m,d,l,q,s,u){function g(a){a.preventDefault()}var p={checkbox:1,radio:1,button:1},c=/\bdgrid-cell\b/,t=/\bdgrid-row\b/;q.add("dom-contains",function(a,b,c){return!!c.contains});var b=k(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=l.mixin({},b.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=l.mixin({},b.defaultHeaderKeyMap))},postCreate:function(){function a(b){var c=b.target;return c.type&&
(!p[c.type]||32==b.keyCode)}function b(f){function g(){if(e._focusedHeaderNode=l=h?e.headerNode.getElementsByTagName("th")[0]:e.headerNode)l.tabIndex=e.tabIndex}var h=e.cellNavigation,n=h?c:t,k=f===e.headerNode,l=f;k?(g(),m.after(e,"renderHeader",g,!0)):m.after(e,"renderArray",function(a){return u.when(a,function(a){var b=e._focusedNode||l,c;if(c=n.test(b.className))c=b,c=q("dom-contains")?f.contains(c):f.compareDocumentPosition(c)&8;if(c)return a;c=0;for(var d=f.getElementsByTagName("*"),g;g=d[c];++c)if(n.test(g.className)){b=
e._focusedNode=g;break}b.tabIndex=e.tabIndex;return a})});e._listeners.push(d(f,"mousedown",function(b){a(b)||e._focusOnNode(b.target,k,b)}));e._listeners.push(d(f,"keydown",function(b){if(!b.metaKey&&!b.altKey){var c=e[k?"headerKeyMap":"keyMap"][b.keyCode];c&&!a(b)&&c.call(e,b)}}))}this.inherited(arguments);var e=this;this.tabableHeader&&(b(this.headerNode),d(this.headerNode,"dgrid-cellfocusin",function(){e.scrollTo({x:this.scrollLeft})}));b(this.contentNode)},addKeyHandler:function(a,b,c){return m.after(this[c?
"headerKeyMap":"keyMap"],a,b,!0)},_focusOnNode:function(a,b,c){b="_focused"+(b?"Header":"")+"Node";var e=this[b],f=this.cellNavigation?"cell":"row",g=this[f](a),h,n,k,p,m;if(a=g&&g.element){if(this.cellNavigation){h=a.getElementsByTagName("input");m=0;for(k=h.length;m<k;m++)if(n=h[m],(-1!=n.tabIndex||"lastValue"in n)&&!n.disabled){8>q("ie")&&(n.style.position="relative");n.focus();8>q("ie")&&(n.style.position="");p=!0;break}}c=l.mixin({grid:this},c);c.type&&(c.parentType=c.type);c.bubbles||(c.bubbles=
!0);e&&(s(e,"!dgrid-focus[!tabIndex]"),8>q("ie")&&(e.style.position=""),c[f]=this[f](e),d.emit(a,"dgrid-cellfocusout",c));e=this[b]=a;c[f]=g;p||(8>q("ie")&&(a.style.position="relative"),a.tabIndex=this.tabIndex,a.focus());s(a,".dgrid-focus");d.emit(e,"dgrid-cellfocusin",c)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){this._focusOnNode(a||this._focusedNode,!1)}}),a=b.moveFocusVertical=function(a,b){var c=this.cellNavigation,d=this[c?"cell":"row"](a),
d=c&&d.column.id,e=this.down(this._focusedNode,b,!0);c&&(e=this.cell(e,d));this._focusOnNode(e,!1,a);a.preventDefault()};k=b.moveFocusUp=function(b){a.call(this,b,-1)};var f=b.moveFocusDown=function(b){a.call(this,b,1)},y=b.moveFocusPageUp=function(b){a.call(this,b,-this.pageSkip)},e=b.moveFocusPageDown=function(b){a.call(this,b,this.pageSkip)},n=b.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var c=!this.row(a);this._focusOnNode(this.right(this["_focused"+(c?"Header":"")+"Node"],b),c,
a);a.preventDefault()}},B=b.moveFocusLeft=function(a){n.call(this,a,-1)},h=b.moveFocusRight=function(a){n.call(this,a,1)},v=b.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},w=b.moveHeaderFocusHome=function(a){v.call(this,a,!0)},C=b.moveFocusEnd=function(a,b){var c=this,d=this.cellNavigation,e=this.contentNode,f=e.scrollTop+(b?0:e.scrollHeight),e=e[b?"firstChild":"lastChild"],g=
-1<e.className.indexOf("dgrid-preload"),h=g?e[(b?"next":"previous")+"Sibling"]:e,n=h.offsetTop+(b?0:h.offsetHeight),k;if(g){for(;h&&0>h.className.indexOf("dgrid-row");)h=h[(b?"next":"previous")+"Sibling"];if(!h)return}!g||1>e.offsetHeight?(d&&(h=this.cell(h,this.cell(a).column.id)),this._focusOnNode(h,!1,a)):(q("dom-addeventlistener")||(a=l.mixin({},a)),k=m.after(this,"renderArray",function(e){k.remove();return u.when(e,function(e){e=e[b?0:e.length-1];d&&(e=c.cell(e,c.cell(a).column.id));c._focusOnNode(e,
!1,a)})}));f===n&&a.preventDefault()},G=b.moveFocusHome=function(a){C.call(this,a,!0)};b.defaultKeyMap={32:g,33:y,34:e,35:C,36:G,37:B,38:k,39:h,40:f};b.defaultHeaderKeyMap={32:g,35:v,36:w,37:B,39:h};return b})},"dojo/Evented":function(){define(["./aspect","./on"],function(k,m){function d(){}var l=k.after;d.prototype={on:function(d,k){return m.parse(this,d,k,function(d,g){return l(d,"on"+g,k,!0)})},emit:function(d,k){var l=[this];l.push.apply(l,arguments);return m.emit.apply(m,l)}};return d})},"dgrid/util/misc":function(){define(["put-selector/put"],
function(k){var m=[],d,l,q,s=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,u={defaultDelay:15,throttle:function(d,k,c){var l=!1;c=c||u.defaultDelay;return function(){l||(l=!0,d.apply(k,arguments),setTimeout(function(){l=!1},c))}},throttleDelayed:function(d,k,c){var l=!1;c=c||u.defaultDelay;return function(){if(!l){l=!0;var b=arguments;setTimeout(function(){l=!1;d.apply(k,b)},c)}}},debounce:function(d,k,c){var l;c=c||u.defaultDelay;return function(){l&&(clearTimeout(l),l=null);var b=arguments;l=setTimeout(function(){d.apply(k,
b)},c)}},each:function(d,k,c){var l,b;if(d)if("number"===typeof d.length){l=0;for(b=d.length;l<b;l++)k.call(c,d[l],l,d)}else for(l in d)k.call(c,d[l],l,d)},addCssRule:function(g,p){d||(d=k(document.getElementsByTagName("head")[0],"style"),d=d.sheet||d.styleSheet,l=d.deleteRule?"deleteRule":"removeRule",q=d.cssRules?"cssRules":"rules");var c=m.length;m[c]=(d.cssRules||d.rules).length;d.addRule?d.addRule(g,p):d.insertRule(g+"{"+p+"}",m[c]);return{get:function(g){return d[q][m[c]].style[g]},set:function(g,
b){"undefined"!==typeof m[c]&&(d[q][m[c]].style[g]=b)},remove:function(){var g=m[c],b,a;if(void 0!==g){d[l](g);m[c]=void 0;b=c+1;for(a=m.length;b<a;b++)m[b]>g&&m[b]--}}}},escapeCssIdentifier:function(d){return d.replace(s,"\\$1")}};return u})},"dojo/errors/CancelError":function(){define(["./create"],function(k){return k("CancelError",null,null,{dojoType:"cancel"})})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(k,m,d){k._name="browser";m.mixin(k,{isBrowser:!0,isFF:d("ff"),
isIE:d("ie"),isKhtml:d("khtml"),isWebKit:d("webkit"),isMozilla:d("mozilla"),isMoz:d("mozilla"),isOpera:d("opera"),isSafari:d("safari"),isChrome:d("chrome"),isMac:d("mac"),isIos:d("ios"),isAndroid:d("android"),isWii:d("wii"),isQuirks:d("quirks"),isAir:d("air")});return d})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(k,m,d,l,q){var s=Object.freeze||function(){},u=function(b,a,c,d,e){2===a&&(t.instrumentRejected&&
0===b.length)&&t.instrumentRejected(c,!1,d,e);for(e=0;e<b.length;e++)g(b[e],a,c,d)},g=function(b,a,d,g){var e=b[a],l=b.deferred;if(e)try{var k=e(d);if(0===a)"undefined"!==typeof k&&c(l,a,k);else{if(k&&"function"===typeof k.then){b.cancel=k.cancel;k.then(p(l,1),p(l,2),p(l,0));return}c(l,1,k)}}catch(h){c(l,2,h)}else c(l,a,d);2===a&&t.instrumentRejected&&t.instrumentRejected(d,!!e,g,l.promise)},p=function(b,a){return function(d){c(b,a,d)}},c=function(b,a,c){if(!b.isCanceled())switch(a){case 0:b.progress(c);
break;case 1:b.resolve(c);break;case 2:b.reject(c)}},t=function(b){var a=this.promise=new l,c=this,k,e,n,p=!1,h=[];Error.captureStackTrace&&(Error.captureStackTrace(c,t),Error.captureStackTrace(a,t));this.isResolved=a.isResolved=function(){return 1===k};this.isRejected=a.isRejected=function(){return 2===k};this.isFulfilled=a.isFulfilled=function(){return!!k};this.isCanceled=a.isCanceled=function(){return p};this.progress=function(b,d){if(k){if(!0===d)throw Error("This deferred has already been fulfilled.");
return a}u(h,0,b,null,c);return a};this.resolve=function(b,d){if(k){if(!0===d)throw Error("This deferred has already been fulfilled.");return a}u(h,k=1,e=b,null,c);h=null;return a};var m=this.reject=function(b,d){if(k){if(!0===d)throw Error("This deferred has already been fulfilled.");return a}Error.captureStackTrace&&Error.captureStackTrace(n={},m);u(h,k=2,e=b,n,c);h=null;return a};this.then=a.then=function(b,c,d){var f=[d,b,c];f.cancel=a.cancel;f.deferred=new t(function(a){return f.cancel&&f.cancel(a)});
k&&!h?g(f,k,e,n):h.push(f);return f.deferred.promise};this.cancel=a.cancel=function(a,c){if(k){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(b){var f=b(a);a="undefined"===typeof f?a:f}p=!0;if(k){if(2===k&&e===a)return a}else return"undefined"===typeof a&&(a=new d),m(a),a}};s(a)};t.prototype.toString=function(){return"[object Deferred]"};q&&q(t);return t})},"dojo/aspect":function(){define([],function(){function k(d,k,c,m){var b=d[k],a="around"==k,f;if(a){var q=c(function(){return b.advice(this,
arguments)});f={remove:function(){q&&(q=d=c=null)},advice:function(a,c){return q?q.apply(a,c):b.advice(a,c)}}}else f={remove:function(){if(f.advice){var a=f.previous,b=f.next;!b&&!a?delete d[k]:(a?a.next=b:d[k]=b,b&&(b.previous=a));d=c=f.advice=null}},id:l++,advice:c,receiveArguments:m};if(b&&!a)if("after"==k){for(;b.next&&(b=b.next););b.next=f;f.previous=b}else"before"==k&&(d[k]=f,f.next=b,b.previous=f);else d[k]=f;return f}function m(g){return function(m,c,q,b){var a=m[c],f;if(!a||a.target!=m)m[c]=
f=function(){for(var a=l,b=arguments,c=f.before;c;)b=c.advice.apply(this,b)||b,c=c.next;if(f.around)var g=f.around.advice(this,b);for(c=f.after;c&&c.id<a;){if(c.receiveArguments)var h=c.advice.apply(this,b),g=h===d?g:h;else g=c.advice.call(this,g,b);c=c.next}return g},a&&(f.around={advice:function(b,c){return a.apply(b,c)}}),f.target=m;m=k(f||a,g,q,b);q=null;return m}}var d,l=0,q=m("after"),s=m("before"),u=m("around");return{before:s,around:u,after:q}})},"dojo/when":function(){define(["./Deferred",
"./promise/Promise"],function(k,m){return function(d,l,q,s){var u=d&&"function"===typeof d.then,g=u&&d instanceof m;if(u)g||(u=new k(d.cancel),d.then(u.resolve,u.reject,u.progress),d=u.promise);else return 1<arguments.length?l?l(d):d:(new k).resolve(d);return l||q||s?d.then(l,q,s):d}})},"xstyle/css":function(){define(["require"],function(k){function m(d,k,m){var s=document.documentElement;d=s.insertBefore(document.createElement(d),s.firstChild);d.id=k;k=(d.currentStyle||getComputedStyle(d,null))[m];
s.removeChild(d);return k}return{load:function(d,l,q,s){function u(){var c=m("x-parse",null,"content");c&&"none"!=c?l([eval(c)],q):q()}var g=l.toUrl(d),p=l.cache&&l.cache["url:"+g];if(p)return p.xCss&&(p=p.cssText),k(["./util/createStyleSheet"],function(c){c(p)}),u();if("none"==m("div",d.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return u();k(["./core/load-css"],function(c){c(g,u)})}}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],
function(k,m,d){function l(a,c,e,h,k){if(h=c.match(/(.*):(.*)/))return c=h[2],h=h[1],g.selector(h,c).call(k,a,e);d("touch")&&(p.test(c)&&(e=G(e)),!d("event-orientationchange")&&"orientationchange"==c&&(c="resize",a=window,e=G(e)));f&&(e=f(e));if(a.addEventListener){var l=c in b,m=l?b[c]:c;a.addEventListener(m,e,l);return{remove:function(){a.removeEventListener(m,e,l)}}}if(B&&a.attachEvent)return B(a,"on"+c,e);throw Error("Target must be an event emitter");}function q(){this.cancelable=!1;this.defaultPrevented=
!0}function s(){this.bubbles=!1}var u=window.ScriptEngineMajorVersion;d.add("jscript",u&&u()+ScriptEngineMinorVersion()/10);d.add("event-orientationchange",d("touch")&&!d("android"));d.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);d.add("event-focusin",function(a,b,c){return!!c.attachEvent});var g=function(a,b,c,d){return"function"==typeof a.on&&"function"!=typeof b&&!a.nodeType?a.on(b,c):g.parse(a,b,c,l,d,this)};g.pausable=
function(a,b,c,d){var e;a=g(a,b,function(){if(!e)return c.apply(this,arguments)},d);a.pause=function(){e=!0};a.resume=function(){e=!1};return a};g.once=function(a,b,c,d){var e=g(a,b,function(){e.remove();return c.apply(this,arguments)});return e};g.parse=function(a,b,c,d,e,f){if(b.call)return b.call(f,a,c);if(-1<b.indexOf(",")){b=b.split(/\s*,\s*/);for(var g=[],h=0,k;k=b[h++];)g.push(d(a,k,c,e,f));g.remove=function(){for(var a=0;a<g.length;a++)g[a].remove()};return g}return d(a,b,c,e,f)};var p=/^touch/;
g.selector=function(a,b,c){return function(d,e){function f(b){for(h=h&&h.matches?h:m.query;!h.matches(b,a,d);)if(b==d||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var h="function"==typeof a?{matches:a}:this,k=b.bubble;return k?g(d,k(f),e):g(d,b,function(a){var b=f(a.target);return b&&e.call(b,a)})}};var c=[].slice,t=g.emit=function(a,b,d){var e=c.call(arguments,2),f="on"+b;if("parentNode"in a){var g=e[0]={},h;for(h in d)g[h]=d[h];g.preventDefault=q;g.stopPropagation=s;g.target=a;g.type=
b;d=g}do a[f]&&a[f].apply(a,e);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},b=d("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!d("event-stopimmediatepropagation"))var a=function(){this.modified=this.immediatelyStopped=!0},f=function(b){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=a,b.apply(this,arguments)}};if(d("dom-addeventlistener"))g.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");
d.initEvent(b,!!c.bubbles,!!c.cancelable);for(var e in c)e in d||(d[e]=c[e]);return a.dispatchEvent(d)&&d}return t.apply(g,arguments)};else{g._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{y&&(a.type==y.type&&a.srcElement==y.target)&&(a=y)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||
(a.stopPropagation=h,a.preventDefault=v),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return a};var y,e=function(a){this.handle=a};e.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var n=function(a){return function(b){b=g._fixEvent(b,this);var c=a.call(this,b);b.modified&&(y||setTimeout(function(){y=
null}),y=b);return c}},B=function(a,b,c){c=n(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>d("jscript"))&&!d("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var f=a[b];if(!f||!f.listeners){var g=f,f=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");f.listeners=
[];a[b]=f;f.global=this;g&&f.listeners.push(_dojoIEListeners_.push(g)-1)}f.listeners.push(a=f.global._dojoIEListeners_.push(c)-1);return new e(a)}return k.after(a,b,c,!0)},h=function(){this.cancelBubble=!0},v=g._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(d("touch"))var w=function(){},C=window.orientation,G=function(a){return function(b){var c=b.corrected;if(!c){var e=b.type;
try{delete b.type}catch(f){}if(b.type){if(d("mozilla")){var c={},g;for(g in b)c[g]=b[g]}else w.prototype=b,c=new w;c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=e;b.corrected=c;if("resize"==e){if(C==window.orientation)return null;C=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var e=c.changedTouches[0],h;for(h in e)delete c[h],c[h]=e[h]}return a.call(this,c)}};return g})}}});
define("dgrid/dgrid",[],1);
//@ sourceMappingURL=dgrid.js.map